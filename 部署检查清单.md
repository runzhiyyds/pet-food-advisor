# ✅ 部署检查清单

按照这个清单逐步检查，确保部署成功！

## 📋 部署前检查

### 本地测试
- [ ] 本地能正常运行 `python3 main_sqlite.py`
- [ ] 本地访问 http://localhost:8000 能正常显示
- [ ] 完整流程测试通过（填写信息 → 选择产品 → 分析 → 查看结果）
- [ ] 没有控制台错误
- [ ] 所有功能都正常工作

### 代码准备
- [ ] 所有代码已保存
- [ ] `.gitignore` 文件已创建
- [ ] `requirements.txt` 文件存在且完整
- [ ] `static/index.html` 中已添加 API 配置注释

---

## 🚀 部署步骤检查

### 步骤 1：GitHub 仓库
- [ ] GitHub 账号已注册
- [ ] 创建了新仓库
- [ ] 代码已推送到 GitHub
- [ ] 可以在 GitHub 上看到所有文件

### 步骤 2：后端部署（Render）
- [ ] Render 账号已注册
- [ ] 已连接 GitHub 账号
- [ ] 创建了 Web Service
- [ ] 配置了正确的 Build Command: `pip install -r requirements.txt`
- [ ] 配置了正确的 Start Command: `uvicorn main_sqlite:app --host 0.0.0.0 --port $PORT`
- [ ] 选择了 Free 计划
- [ ] 部署成功（状态显示 "Live"）
- [ ] 复制了后端 URL（例如：`https://xxx.onrender.com`）
- [ ] 访问 `/docs` 能看到 API 文档

### 步骤 3：前端配置
- [ ] 在 `static/index.html` 中设置了 `window.API_BASE_URL`
- [ ] 将 `window.API_BASE_URL` 设置为你的 Render 后端地址
- [ ] 代码已提交并推送到 GitHub

### 步骤 4：前端部署（GitHub Pages）
- [ ] 在 GitHub 仓库 Settings → Pages 中启用了 Pages
- [ ] Source 选择了 `main` 分支
- [ ] Folder 选择了 `/static`
- [ ] 保存后等待了几分钟
- [ ] 获得了 GitHub Pages URL（例如：`https://xxx.github.io/pet-food-advisor/`）

---

## 🧪 部署后测试

### 基础功能测试
- [ ] 前端页面能正常加载
- [ ] 没有 404 错误
- [ ] 没有 CORS 错误
- [ ] 浏览器控制台没有红色错误

### 功能测试
- [ ] 填写宠物信息能正常提交
- [ ] 产品选择页面能正常显示
- [ ] 系统推荐功能正常
- [ ] 手动输入产品功能正常
- [ ] 开始分析功能正常
- [ ] 进度条能正常显示和更新
- [ ] 分析结果能正常显示
- [ ] 匿名化显示正常（只显示 A/B/C...）
- [ ] Tab 切换正常（营养排名 / 性价比排名）
- [ ] 点击产品卡片能显示详细信息
- [ ] 导出图片功能正常

### 数据一致性检查
- [ ] 本地和线上的产品数据一致
- [ ] 本地和线上的分析逻辑一致
- [ ] 本地和线上的用户体验一致

---

## 🐛 常见问题检查

### CORS 错误
- [ ] 检查 `main_sqlite.py` 中 CORS 配置是否正确
- [ ] 确认 `allow_origins=["*"]` 已设置
- [ ] 检查后端是否正常运行

### 404 错误
- [ ] 检查前端 `window.API_BASE_URL` 是否正确
- [ ] 检查后端 URL 是否包含协议（https://）
- [ ] 检查后端路由是否正确

### 后端休眠
- [ ] 首次访问等待约 30 秒（正常）
- [ ] 如果经常休眠，考虑使用 UptimeRobot 定期 ping

### 静态文件 404
- [ ] 检查 GitHub Pages Source 是否指向 `/static`
- [ ] 检查文件路径是否正确

---

## 📝 部署信息记录

记录你的部署信息，方便后续维护：

### 后端信息
- **服务名称**: ________________
- **URL**: https://________________.onrender.com
- **状态**: [ ] Live [ ] 其他

### 前端信息
- **GitHub 用户名**: ________________
- **仓库名称**: ________________
- **GitHub Pages URL**: https://________________.github.io/________________/

### API 配置
- **API_BASE_URL**: https://________________.onrender.com

---

## ✅ 最终确认

- [ ] 所有测试都通过
- [ ] 没有错误和警告
- [ ] 用户体验良好
- [ ] 可以分享给其他人使用

**🎉 恭喜！部署完成！**

