# 🚧 国内访问问题解决方案

## 问题说明

你的前端部署在 Vercel（`https://pet-food-advisor.vercel.app`），但 **Vercel 在中国大陆被墙**：
- ❌ 大陆用户无法直接访问
- ⚠️ 需要科学上网（VPN）才能打开
- 🚫 DNS 污染导致解析失败

---

## ✅ 3 种解决方案

### 方案 1：改用 Cloudflare Pages（最推荐）⭐⭐⭐⭐⭐

**优点**：
- ✅ 国内可直接访问（无需 VPN）
- ✅ 完全免费
- ✅ 全球 CDN，速度快
- ✅ 配置简单，5 分钟搞定

**操作步骤**：
1. 注册 Cloudflare 账号：https://dash.cloudflare.com/sign-up
2. 进入 Workers & Pages → Create application → Pages
3. 连接 GitHub 仓库：`runzhiyyds/pet-food-advisor`
4. 配置：
   - Build output directory: `static`
   - 其他留空
5. Deploy

**详细教程**：查看 `docs/CLOUDFLARE_PAGES_DEPLOY.md`

---

### 方案 2：使用 Netlify（次选）⭐⭐⭐⭐

**优点**：
- ✅ 国内访问较稳定（比 Vercel 好）
- ✅ 免费额度充足
- ✅ 部署简单

**缺点**：
- ⚠️ 偶尔会被墙（不如 Cloudflare 稳定）

**操作步骤**：
1. 访问：https://app.netlify.com
2. Sign up with GitHub
3. Add new site → Import an existing project
4. 选择仓库：`runzhiyyds/pet-food-advisor`
5. 配置：
   - Publish directory: `static`
6. Deploy site

---

### 方案 3：绑定自定义域名（推荐有域名的用户）⭐⭐⭐⭐⭐

**优点**：
- ✅ 完全掌控，不受平台限制
- ✅ 域名更专业
- ✅ 可以继续使用 Vercel

**缺点**：
- ⚠️ 需要购买域名（约 ¥50-100/年）

**操作步骤**：

#### 3.1 购买域名
推荐平台：
- 腾讯云：https://dnspod.cloud.tencent.com
- 阿里云：https://wanwang.aliyun.com
- Cloudflare：https://www.cloudflare.com/products/registrar/

#### 3.2 在 Vercel 绑定域名
```bash
1. Vercel Dashboard → 项目 pet-food-advisor
2. Settings → Domains
3. 添加域名：例如 pet.yourname.com
4. 复制 Vercel 提供的 DNS 记录
```

#### 3.3 配置 DNS
```bash
1. 进入域名管理后台
2. 添加 CNAME 记录：
   - 主机记录：pet
   - 记录类型：CNAME
   - 记录值：cname.vercel-dns.com
3. 保存，等待生效（5-30分钟）
```

---

## 🎯 推荐选择

| 场景 | 推荐方案 | 理由 |
|------|---------|------|
| **快速上线，国内访问** | Cloudflare Pages | 免费、稳定、国内可访问 |
| **长期运营项目** | 自定义域名 | 专业、可控 |
| **临时测试** | Netlify | 配置简单 |
| **海外用户为主** | 继续用 Vercel | 性能最好 |

---

## 📋 快速行动计划

### 如果你想立即让国内用户访问：

**推荐：Cloudflare Pages（15 分钟完成）**

```bash
第 1 步（5 分钟）：
1. 注册 Cloudflare 账号
2. 验证邮箱

第 2 步（5 分钟）：
1. Workers & Pages → Create
2. 连接 GitHub → 选择仓库
3. 配置：Output directory = static

第 3 步（5 分钟）：
1. Deploy 并等待完成
2. 获得 URL：https://pet-food-advisor.pages.dev
3. 测试国内访问

✅ 完成！国内用户可以直接访问了
```

---

## 🔄 保留 Vercel 还是迁移？

**建议：同时保留两个部署**

```bash
Vercel（海外）:
- URL: https://pet-food-advisor.vercel.app
- 用途：海外用户访问，科学上网用户访问

Cloudflare Pages（国内+海外）:
- URL: https://pet-food-advisor.pages.dev
- 用途：主要访问地址，国内外都能用

后端（统一）:
- URL: https://pet-food-advisor.onrender.com
- 用途：两个前端都连接这个后端
```

**优点**：
- ✅ 国内外用户都能访问
- ✅ 分散风险（一个挂了还有另一个）
- ✅ 无额外成本（都是免费的）

---

## ⚠️ 注意事项

### 关于数据库同步
无论你使用哪个前端部署平台，**后端和数据库都不需要改动**：
- 后端：https://pet-food-advisor.onrender.com ✅
- 数据库：pet_food_selection.db（已部署到 Render）✅
- 前端配置：`window.API_BASE_URL` 已正确指向 Render 后端 ✅

### 关于 Dify API
Dify API 已切换到公网：
- URL: https://api.dify.ai ✅
- API Key: app-H3Owfh8VRao6bUv6wFgRt7Kg ✅
- 国内外都能访问 ✅

---

## 🎉 总结

**问题**：Vercel 在国内被墙 ❌
**解决**：改用 Cloudflare Pages 或绑定域名 ✅
**时间**：15-30 分钟搞定 ⚡
**成本**：完全免费（除非买域名）💰

---

需要帮助？告诉我你的选择，我会提供详细步骤！🚀
